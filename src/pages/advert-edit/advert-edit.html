<ion-header no-border class="myToolbar">
    <ion-navbar transparent [color]="themeColor" >
        <ion-title text-left>Retour à la liste</ion-title>
    </ion-navbar>
</ion-header>

<ion-content class="advert-edit" padding [ngStyle]="backgroundImage">

    <ion-item>
        <ion-label floating>Titre<span class="asterisk">*</span></ion-label>
        <ion-input type="text" [(ngModel)]="advert.titre"></ion-input>
    </ion-item>

        <ion-label>Contenu</ion-label>
    <!--CKEDITOR should absolutely not be put within an ion-item-->
    <ckeditor name="desc"
              [(ngModel)]="advert.description"
              debounce="500">
    </ckeditor>

    <ion-item>
        <ion-label>Forme contrat</ion-label>
        <ion-select [(ngModel)]="contractFormArray" multiple="true">
            <ion-option value="Intérim">Intérim</ion-option>
            <ion-option value="Formation">Formation</ion-option>
            <ion-option value="CDD">CDD</ion-option>
            <ion-option value="CDI">CDI</ion-option>
            <ion-option value="CDI partiel">CDI partiel</ion-option>
        </ion-select>
    </ion-item>

    <ion-row>
        <ion-col text-center>
            <ion-label>Vignette</ion-label>
            <button [hidden]="advert.thumbnail.fileContent" class="file-upload button-picture" [style.backgroundColor]="themeColor">
                <input id="fileinputThumb" type="file" class="file-input" (change)="onChangeUpload($event, 'thumb')">
                <ion-icon name='folder'></ion-icon>
            </button>
        </ion-col>
    </ion-row>

    <ion-card style="margin: auto;" [hidden]="!advert.thumbnail.fileContent" id="card-file-thumb">
        <img [src]="advert.thumbnail.fileContent"/>
        <ion-row>
            <ion-col text-center>
                <button style="margin: auto;" clear (click)="showModal('thumb')" small>
                    <ion-icon name='expand'></ion-icon>
                </button>
            </ion-col>
            <ion-col text-center>
                <button style="margin: auto;" clear (click)="onDelete($event, 'thumb')" small>
                    <ion-icon name='close'></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </ion-card>

    <ion-row>
        <ion-col text-center>
            <ion-label>Image de couverture</ion-label>
            <button [hidden]="advert.imgbg.fileContent" class="file-upload button-picture" [style.backgroundColor]="themeColor">
                <input id="fileinputCover" type="file" class="file-input" (change)="onChangeUpload($event, 'cover')">
                <ion-icon name='folder'></ion-icon>
            </button>
        </ion-col>
    </ion-row>

    <ion-card style="margin: auto;" [hidden]="!advert.imgbg.fileContent" id="card-file-cover">
        <img [src]="advert.imgbg.fileContent"/>
        <ion-row>
            <ion-col text-center>
                <button style="margin: auto;" clear (click)="showModal('cover')" small>
                    <ion-icon name='expand'></ion-icon>
                </button>
            </ion-col>
            <ion-col text-center>
                <button style="margin: auto;" clear (click)="onDelete($event, 'cover')" small>
                    <ion-icon name='close'></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </ion-card>

    <ion-row>
        <ion-col text-center>
            <ion-label>Pièce jointe</ion-label>
            <button class="file-upload button-picture" [style.backgroundColor]="themeColor">
                <input id="pjInput" type="file" class="file-input" (change)="onChangeUpload($event, 'pj')">
                <ion-icon name='folder'></ion-icon>
            </button>
        </ion-col>
    </ion-row>

    <ion-card style="margin: auto;" [hidden]="isEmpty(advert.attachement.fileContent)">
        <ion-row>
            <ion-col text-center>
                <button style="margin: auto;" clear small (click)="downloadAttachement($event)">
                    <ion-icon name='download'></ion-icon>
                </button>
            </ion-col>
            <ion-col text-center>
                <button style="margin: auto;" clear small (click)="onDelete($event, 'pj')">
                    <ion-icon name='close'></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </ion-card>

    <ion-row>
        <ion-col width-10></ion-col>
        <ion-col text-center>
            <button block (click)="saveAdvert()" [style.backgroundColor]="themeColor"
                    [disabled]="isUpdateDisabled()" type="submit">
                <ion-icon name="done-all"></ion-icon>
                Valider
            </button>
        </ion-col>
        <ion-col width-10></ion-col>
    </ion-row>

</ion-content>
