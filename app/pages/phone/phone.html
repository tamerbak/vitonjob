

<ion-content class="phone" [ngStyle]="backgroundImage">
	<button style="background-color: transparent; color: #757575;" menuToggle>
		<ion-icon name="menu"></ion-icon>
	</button>
	
	<ion-label stacked style="padding: 16px">Entrez votre numéro de téléphone portable</ion-label>
	<ion-row baseline class="ionRow">
		<ion-col width-33>
			<ion-item>
			<ion-input type="number" [(ngModel)]="index" maxlength="4"  min="0" inputmode="numeric" pattern="[0-9]*"  (keyup)="watchIndex($event)" (change)="isIndexExist($event)" disabled></ion-input>
			</ion-item>
		</ion-col>
		<ion-col width-10 style="padding-left: 0;padding-right: 0;">
			<ion-item (click)="doRadioAlert()" style="padding-left: 0;border-top: none; border-left: none" no-lines>
				<ion-icon name="ios-arrow-down"></ion-icon>
				<!--button (click)="doRadioAlert()" id="btn-pays" clear small><ion-icon name="ios-arrow-down"></ion-icon></button-->
			</ion-item>
		</ion-col>
		<ion-col>
			<ion-item>
				<ion-input type="number" [(ngModel)]="phone" (keyup)="watchPhone($event)" (change)="validatePhone($event)" inputmode="numeric" pattern="[0-9]*"></ion-input>
			</ion-item>
		</ion-col>
	</ion-row>
	<div [hidden]="isPhoneNumValid" class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Veuillez saisir un numéro de téléphone valide</div>
	<div [hidden]="isIndexValid" class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Veuillez saisir un indicatif valide</div>
	
	<ion-label [hidden]="!showEmailField" stacked style="padding: 16px">Votre email</ion-label>
	<ion-item [hidden]="!showEmailField"  style="margin-left: 16px">
		<ion-input #focusable id="email" type="email" [(ngModel)]="email" (change)="isEmailExist($event)"></ion-input>
	</ion-item>
	<div [hidden]="!showEmailError()" 
            class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Veuillez saisir un email valide</div>
	<div [hidden]="!emailExist" 
            class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Cet email est déjà utilisé. Veuillez choisir un autre.</div>
	
	<ion-label stacked style="padding: 16px">Votre mot de passe</ion-label>
	<div id="hidePasswd">
		<ion-item style="margin-left: 16px" >
			<ion-input type="password" [(ngModel)]="password1"></ion-input>
		</ion-item>
	</div>
	<div id="showPasswd" style="display:none;">
		<ion-item style="margin-left: 16px">
			<ion-input type="text" [(ngModel)]="password1"></ion-input>
		</ion-item>
	</div>
	<ion-item style="margin-left: 16px">
		<ion-label>{{showHidePasswdLabel}}</ion-label>
		<ion-checkbox (ionChange)="showHidePasswd()"></ion-checkbox>
	</ion-item>
	<div [hidden]="!showPassword1Error()" 
            class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Taille minimale: 6 caractères</div>
	
	<ion-label [hidden]="!showEmailField" stacked style="padding: 16px">Confirmation du mot de passe</ion-label>
	<div id="hidePasswdConfirm">
		<ion-item [hidden]="!showEmailField" style="margin-left: 16px">
			<ion-input type="password" [(ngModel)]="password2"></ion-input>
		</ion-item>
	</div>
	<div id="showPasswdConfirm" style="display:none;" [hidden]="!showEmailField">
		<ion-item style="margin-left: 16px">
			<ion-input type="text" [(ngModel)]="password2"></ion-input>
		</ion-item>
	</div>
	<ion-item style="margin-left: 16px" [hidden]="!showEmailField">
		<ion-label>{{showHidePasswdConfirmLabel}}</ion-label>
		<ion-checkbox (ionChange)="showHidePasswdConfirm()"></ion-checkbox>
	</ion-item>
	<div [hidden]="!showPassword2Error()" 
            class="error-box"><ion-icon name="md-arrow-dropup"></ion-icon> Mots de passe non identiques!</div>


	<ion-row>&nbsp;</ion-row>
	<ion-row>&nbsp;</ion-row>
	<ion-row>&nbsp;</ion-row>
	<ion-row>&nbsp;</ion-row>
	<ion-row>&nbsp;</ion-row>
	<ion-row id="btn-co" >
		<ion-col width-10></ion-col>
		<ion-col text-center>
			<button block (click)="authenticate()" [style.backgroundColor]="themeColor" [disabled]="isAuthDisabled()" type="submit">
				<ion-icon name="log-in"></ion-icon>
				{{libelleButton}}
			</button>
		</ion-col>
		<ion-col width-10></ion-col>
	</ion-row>

	<!--ion-row id="btn-q">
		<ion-col width-10></ion-col>
		<ion-col text-center>
			<button block [style.backgroundColor]="themeColor" (click)="goBack()">
				<ion-icon name="undo"></ion-icon>
			Quitter
			</button>
		</ion-col>
		<ion-col width-10></ion-col>
	</ion-row-->
	<ion-row id="btn-mdp" >
		<ion-col width-10></ion-col>
		<ion-col text-center style="    padding-top: 0px;">
			<button block [style.backgroundColor]="themeColor" style="font-size: 13px; padding-top: 0px;" (click)="displayPasswordAlert()">
				<ion-icon name="key"></ion-icon>
				Mot de passe oublié ?
			</button>
		</ion-col>
		<ion-col width-10></ion-col>
	</ion-row>
</ion-content>

